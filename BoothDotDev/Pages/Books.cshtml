@page
@using BoothDotDev.Common.Data.Web
@using BoothDotDev.Common.Services
@using Humanizer
@inject IReadingListService ReadingListService
@{
    ViewData["Title"] = "Reading List";
}

<article class="post-single">
    <header class="post-header">
        <div class="breadcrumbs">
            <a asp-page="/Index">Home</a>
            &nbsp;¬ª&nbsp;
            <a asp-page="/Books">Reading List</a>
        </div>
        <h1 class="post-title entry-hint-parent">Reading List</h1>
    </header>
    <div class="post-content">
        <p>
            This is a list of the books I've read, I'm currently reading, or that I plan to read. Not every book is
            listed here, but I will update this list as I try to remember what it is I've read in the past.
        </p>
        <p>
            This list is also available on <a href="https://www.goodreads.com/review/list/145592619">Goodreads</a>.
        </p>

        @{
            Span<BookState> states = [BookState.Reading, BookState.PlanToRead, BookState.Read];
            string[] emoji = ["üìñ", "üóìÔ∏è", "‚úÖ"];
            for (var index = 0; index < states.Length; index++)
            {
                BookState state = states[index];
                IReadOnlyCollection<IBook> books = ReadingListService.GetBooks(state);
                <h3>@state.Humanize(LetterCasing.Sentence) @emoji[index]</h3>

                <ul>
                    @foreach (IBook book in books.OrderBy(b => b.Author).ThenBy(b => b.Title))
                    {
                        <li>
                            <strong>@book.Title</strong> by @book.Author
                            <br>
                            <small>(ISBN13 <a href="https://isbndb.com/book/@book.Isbn">@book.Isbn</a>)</small>
                        </li>
                    }
                </ul>
            }
        }
    </div>
</article>
